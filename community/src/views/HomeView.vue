<template>
  <div class="home">
    <!-- é›ªèŠ±é£˜è½æ•ˆæœå®¹å™¨ -->
    <div class="snow-container"></div>
    
    <div class="hero">
      <div class="container">
        <h2 class="hero-title typewriter">æ¬¢è¿æ¥åˆ°å“ˆå°”æ»¨å†°é›ªæ—…æ¸¸æŒ‡å—</h2>
        <p class="hero-subtitle">æ¢ç´¢å†°é›ªå¥‡ç¼˜ï¼Œç•…äº«åŒ—å›½é£å…‰</p>
      </div>
    </div>
    
    <div class="features">
      <div class="container">
        <h3>æ ¸å¿ƒåŠŸèƒ½</h3>
        <div class="feature-cards">
          <div class="card card-hover" @click="goTo('transport')">
            <div class="card-icon">ğŸšŒ</div>
            <h4>äº¤é€šç¥¨ä»·æŸ¥è¯¢</h4>
            <p>è·å–å“ˆå°”æ»¨å„ç±»äº¤é€šå·¥å…·çš„è¯¦ç»†ç¥¨ä»·ä¿¡æ¯å’Œä¹˜åæŒ‡å—</p>
          </div>
          
          <div class="card card-hover" @click="goTo('tips')">
            <div class="card-icon">âš ï¸</div>
            <h4>é¿å‘æŒ‡å—</h4>
            <p>å®ç”¨çš„æ—…æ¸¸è´´å£«ï¼Œå¸®åŠ©æ‚¨é¿å¼€å¸¸è§é™·é˜±ï¼Œäº«å—å®Œç¾æ—…ç¨‹</p>
          </div>
          
          <div class="card card-hover" @click="goTo('forum')">
            <div class="card-icon">ğŸ’¬</div>
            <h4>æ—…æ¸¸è®ºå›</h4>
            <p>ä¸å…¶ä»–æ¸¸å®¢äº¤æµç»éªŒï¼Œåˆ†äº«å¿ƒå¾—ï¼Œè·å–æœ€æ–°æ—…æ¸¸ä¿¡æ¯</p>
          </div>
        </div>
      </div>
    </div>
    
    <div class="highlight">
      <div class="container">
        <h3>å“ˆå°”æ»¨çƒ­é—¨æ™¯ç‚¹</h3>
        <div class="scenic-spots">
          <div class="spot flip-card">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <img src="https://ts1.tc.mm.bing.net/th/id/R-C.7d07203bba9f27da6f3920746a18a027?rik=l%2bm%2fjlg0Q4d0lw&riu=http%3a%2f%2fimg95.699pic.com%2fphoto%2f50116%2f4211.jpg_wh860.jpg&ehk=ZylboPWKeOXXAS7LoRPu6EkaQxyD6y6Y9X6cLgGnjUg%3d&risl=&pid=ImgRaw&r=0" alt="å“ˆå°”æ»¨å†°é›ªå¤§ä¸–ç•Œ" style="width: 100%; height: 200px; object-fit: cover;">
                <h4>å“ˆå°”æ»¨å†°é›ªå¤§ä¸–ç•Œ</h4>
                <p>ä¸–ç•Œæœ€å¤§çš„å†°é›ªä¸»é¢˜ä¹å›­ï¼Œæ¯å¹´å¸å¼•æ•°ç™¾ä¸‡æ¸¸å®¢</p>
              </div>
              <div class="flip-card-back glass-effect">
                <h4>å“ˆå°”æ»¨å†°é›ªå¤§ä¸–ç•Œ</h4>
                <p>å¼€æ”¾æ—¶é—´: 09:00-21:30</p>
                <p>é—¨ç¥¨ä»·æ ¼: 330å…ƒ/äºº</p>
                <p>æ¨èæ¸¸ç©æ—¶é—´: 3-4å°æ—¶</p>
              </div>
            </div>
          </div>
          
          <div class="spot flip-card">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <img src="https://ts2.tc.mm.bing.net/th/id/OIP-C.QWlj3cBTGXnXT9dDzNHc1AHaE8?rs=1&pid=ImgDetMain" alt="ä¸­å¤®å¤§è¡—" style="width: 100%; height: 200px; object-fit: cover;">
                <h4>ä¸­å¤®å¤§è¡—</h4>
                <p>ç™¾å¹´å†å²çš„å•†ä¸šè€è¡—ï¼Œå……æ»¡æ¬§æ´²é£æƒ…çš„å»ºç­‘å’Œç‰¹è‰²ç¾é£Ÿ</p>
              </div>
              <div class="flip-card-back glass-effect">
                <h4>ä¸­å¤®å¤§è¡—</h4>
                <p>å¼€æ”¾æ—¶é—´: å…¨å¤©å¼€æ”¾</p>
                <p>é—¨ç¥¨ä»·æ ¼: å…è´¹</p>
                <p>æ¨èæ¸¸ç©æ—¶é—´: 2-3å°æ—¶</p>
              </div>
            </div>
          </div>
          
          <div class="spot flip-card">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <img src="https://youimg1.c-ctrip.com/target/100h180000013yt7w5EA2.jpg" alt="æ¾èŠ±æ±Ÿ" style="width: 100%; height: 200px; object-fit: cover;">
                <h4>æ¾èŠ±æ±Ÿ</h4>
                <p>å†¬å­£å¯ä»¥åœ¨æ±Ÿä¸Šè¿›è¡Œå„ç§å†°ä¸Šæ´»åŠ¨ï¼Œæ„Ÿå—åŒ—å›½ç‰¹è‰²</p>
              </div>
              <div class="flip-card-back glass-effect">
                <h4>æ¾èŠ±æ±Ÿ</h4>
                <p>å¼€æ”¾æ—¶é—´: å…¨å¤©å¼€æ”¾</p>
                <p>é—¨ç¥¨ä»·æ ¼: å…è´¹ï¼ˆéƒ¨åˆ†æ´»åŠ¨æ”¶è´¹ï¼‰</p>
                <p>æ¨èæ¸¸ç©æ—¶é—´: 1-2å°æ—¶</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  name: 'HomeView',
  methods: {
    goTo(route) {
      this.$router.push(`/${route}`)
    },
    
    // åˆ›å»ºé›ªèŠ±é£˜è½æ•ˆæœ
    createSnowflakes() {
      const snowContainer = document.querySelector('.snow-container');
      if (!snowContainer) return;
      
      // æ¸…é™¤å·²æœ‰çš„é›ªèŠ±
      snowContainer.innerHTML = '';
      
      const snowflakeCount = 100; // é›ªèŠ±æ•°é‡
      
      for (let i = 0; i < snowflakeCount; i++) {
        const snowflake = document.createElement('div');
        snowflake.classList.add('snowflake');
        
        // éšæœºå¤§å°
        const size = Math.random() * 8 + 2;
        snowflake.style.width = `${size}px`;
        snowflake.style.height = `${size}px`;
        
        // éšæœºä½ç½®
        snowflake.style.left = `${Math.random() * 100}%`;
        
        // éšæœºåŠ¨ç”»æŒç»­æ—¶é—´
        const duration = Math.random() * 10 + 5;
        snowflake.style.animationDuration = `${duration}s`;
        
        // éšæœºåŠ¨ç”»å»¶è¿Ÿ
        const delay = Math.random() * 10;
        snowflake.style.animationDelay = `${delay}s`;
        
        // éšæœºé€æ˜åº¦
        snowflake.style.opacity = Math.random() * 0.8 + 0.2;
        
        // éšæœºåŠ¨ç”»é€Ÿåº¦
        snowflake.style.animationTimingFunction = `cubic-bezier(${Math.random() * 0.3 + 0.1}, 0, ${Math.random() * 0.3 + 0.7}, 1)`;
        
        snowContainer.appendChild(snowflake);
      }
    },
    
    // é¡µé¢æ»šåŠ¨æ—¶ä¸ºå…ƒç´ æ·»åŠ åŠ¨ç”»
    animateOnScroll() {
      const elements = document.querySelectorAll('.card, .spot');
      
      elements.forEach(element => {
        const elementPosition = element.getBoundingClientRect().top;
        const screenPosition = window.innerHeight / 1.2;
        
        if (elementPosition < screenPosition) {
          element.style.opacity = '1';
          element.style.transform = 'translateY(0)';
        }
      });
    }
  },
  
  mounted() {
    // åˆ›å»ºé›ªèŠ±
    this.createSnowflakes();
    
    // åˆå§‹è®¾ç½®
    document.querySelectorAll('.card, .spot').forEach(element => {
      element.style.opacity = '0';
      element.style.transform = 'translateY(30px)';
      element.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
    });
    
    // ç›‘å¬æ»šåŠ¨äº‹ä»¶
    window.addEventListener('scroll', this.animateOnScroll);
    
    // åˆå§‹è§¦å‘ä¸€æ¬¡
    this.animateOnScroll();
  },
  
  beforeUnmount() {
    // æ¸…ç†äº‹ä»¶ç›‘å¬å™¨
    window.removeEventListener('scroll', this.animateOnScroll);
  }
}
</script>

<style scoped>
.hero {
  background: linear-gradient(135deg, #0056b3 0%, #003d82 100%);
  background-size: 400% 400%;
  animation: gradientShift 15s ease infinite;
  color: white;
  text-align: center;
  padding: 150px 0;
  position: relative;
  overflow: hidden;
}

.hero::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><polygon points="0,100 100,0 100,100" fill="rgba(255,255,255,0.05)"/></svg>');
  background-size: cover;
}

.hero-title {
  font-size: 3rem;
  margin-bottom: 20px;
  text-shadow: 0 2px 10px rgba(0,0,0,0.2);
  animation: slideInTop 0.8s ease-out;
}

.hero-subtitle {
    font-size: 1.5rem;
    opacity: 0;
    animation: fadeIn 1s ease-out 0.5s forwards;
  }

  /* é›ªèŠ±å®¹å™¨æ ·å¼ */
  .snow-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 9999;
  }

  .features {
    background-color: white;
    padding: 60px 0;
  }

  .features h3 {
    text-align: center;
    font-size: 2rem;
    margin-bottom: 40px;
    color: #0056b3;
    position: relative;
    display: inline-block;
    left: 50%;
    transform: translateX(-50%);
    padding: 10px 20px;
  }

  .features h3::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 20%;
    width: 60%;
    height: 3px;
    background: linear-gradient(90deg, transparent, #0056b3, transparent);
  }

  /* åŠŸèƒ½å¡ç‰‡æ ·å¼å¢å¼º */
  .feature-cards {
    display: flex;
    justify-content: space-between;
    gap: 20px;
    flex-wrap: wrap;
  }

  .card {
    flex: 1;
    min-width: 280px;
    background-color: #f9f9f9;
    border-radius: 10px;
    padding: 30px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    text-align: center;
    cursor: pointer;
    position: relative;
    overflow: hidden;
    transition: transform 0.3s, box-shadow 0.3s;
  }

  .card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 5px;
    background: linear-gradient(90deg, #0056b3, #003d82);
    transform: scaleX(0);
    transition: transform 0.3s ease;
    transform-origin: left;
  }

  .card:hover::before {
    transform: scaleX(1);
  }

  .card:hover {
    transform: translateY(-10px);
    box-shadow: 0 10px 20px rgba(0,0,0,0.12);
  }

  .card-icon {
    font-size: 3rem;
    margin-bottom: 20px;
    transition: transform 0.3s ease;
  }

  .card:hover .card-icon {
    transform: scale(1.2) rotate(10deg);
  }

  .card h4 {
    font-size: 1.5rem;
    margin-bottom: 15px;
    color: #333;
  }

  .card p {
    color: #666;
    line-height: 1.6;
  }

  /* æ™¯ç‚¹å±•ç¤ºæ ·å¼å¢å¼º */
  .highlight {
    background-color: #f8f9fa;
    padding: 60px 0;
  }

  .highlight h3 {
    text-align: center;
    font-size: 2rem;
    margin-bottom: 40px;
    color: #0056b3;
    position: relative;
    display: inline-block;
    left: 50%;
    transform: translateX(-50%);
    padding: 10px 20px;
  }

  .highlight h3::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 20%;
    width: 60%;
    height: 3px;
    background: linear-gradient(90deg, transparent, #0056b3, transparent);
  }

  .scenic-spots {
    display: flex;
    justify-content: space-between;
    gap: 20px;
    flex-wrap: wrap;
  }

  .spot {
    flex: 1;
    min-width: 280px;
    background-color: white;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    height: 320px;
  }

  .flip-card {
    perspective: 1000px;
  }

  .flip-card-inner {
    position: relative;
    width: 100%;
    height: 100%;
    text-align: center;
    transition: transform 0.8s ease;
    transform-style: preserve-3d;
  }

  .flip-card:hover .flip-card-inner {
    transform: rotateY(180deg);
  }

  .flip-card-front,
  .flip-card-back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    border-radius: 10px;
    overflow: hidden;
  }

  .flip-card-front {
    background-color: white;
  }

  .flip-card-back {
    background: linear-gradient(135deg, #0056b3 0%, #003d82 100%);
    color: white;
    transform: rotateY(180deg);
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 20px;
  }

  .flip-card-front img {
    width: 100%;
    height: 200px;
    object-fit: cover;
    transition: transform 0.5s ease;
  }

  .flip-card-front:hover img {
    transform: scale(1.1);
  }

  .flip-card-front h4 {
    font-size: 1.3rem;
    margin: 15px 0 10px;
    color: #333;
  }

  .flip-card-front p {
    color: #666;
    padding: 0 20px 20px;
    font-size: 0.95rem;
  }

  .flip-card-back h4 {
    font-size: 1.5rem;
    margin-bottom: 15px;
    text-shadow: 0 2px 4px rgba(0,0,0,0.2);
  }

  .flip-card-back p {
    margin: 8px 0;
    font-size: 1rem;
    text-shadow: 0 1px 2px rgba(0,0,0,0.2);
  }

  /* å“åº”å¼å¸ƒå±€ä¼˜åŒ– */
  @media (max-width: 768px) {
    .feature-cards,
    .scenic-spots {
      flex-direction: column;
      align-items: center;
    }
    
    .hero-title {
      font-size: 2.2rem;
    }
    
    .hero-subtitle {
      font-size: 1.2rem;
    }
    
    .card, .spot {
      width: 100%;
    }
  }
</style>